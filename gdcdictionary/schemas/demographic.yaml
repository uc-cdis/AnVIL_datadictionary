$schema: "http://json-schema.org/draft-04/schema#"

id: "demographic"
title: Demographic
type: object
namespace: https://dcp.bionimbus.org/
category: clinical
program: '*'
project: '*'
description: >
  Data for the characterization of the patient by means of segementing the population (e.g.,
  characterization by age, sex, or race).
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: cases
    backref: demographics
    label: describes
    target_type: case
    multiplicity: one_to_one
    required: true

required:
  - type
  - submitter_id
  - cases

uniqueKeys:
  #unclear if want submitter ID for clinical
  - [id]
  - [project_id, submitter_id]

properties:
  $ref: "_definitions.yaml#/ubiquitous_properties"


  age:
    term:
      $ref: "_terms.yaml#/age"
    description: >
      Age at last visit. Age is encoded as ISO8601 duration. (CMG, CCDG, GTEx)
    type: integer

  age_at_last_observation:
    description: >
      Age at last observation. For conditions with later age of onset, this field lets users know if individuals marked as unaffected were younger or older than the age when the phenotype is expected to appear. (CMG)
    type: integer

  ancestry:
    description: >
      Reported ancestry defined by NIH Racial and Ethnic Categories and Definitions (NOT-OD-15-089). (CMG)
    enum:
      - "American Indian or Alaskan Native"
      - "Asian"
      - "Black or African American"
      - "Hispanic or Latino"
      - "Native Hawaiian or Other Pacific Islander"
      - "White"
      - "Other"
      - "Unknown"

  ancestry_detail:
    description: >
      Additional specific ancestry description free text. (CMG)
    type: string

  sex:
    term:
      $ref: "_terms.yaml#/sex"
    description: >
      Text designations that identify gender. Gender is described as the assemblage of properties that distinguish people on the basis of their societal roles. (CMG, CCDG, GTEx)
    enum:
      - female
      - male
      - unknown_sex
      - other_sex
      - intersex

  consanguinity_status:
    description: >
      Consanguinity status is the property of being from the same kinship as another person. (CMG)
    type: boolean

  race:
    term:
      $ref: "_terms.yaml#/race"
    enum:
      - "white"
      - "american indian or alaska native"
      - "black or african american"
      - "asian"
      - "native hawaiian or other pacific islander"
      - "hispanic"
      - "multiple"
      - "other"
      - "Unknown"
      - "not reported"
      - "not allowed to collect"
      

  population:
    description: >
      CHB Han Chinese in Beijing, China EAS; JPT Japanese in Tokyo, Japan EAS; CHS Southern Han Chinese EAS; CDX Chinese Dai in Xishuangbanna, China EAS; KHV Kinh in Ho Chi Minh City, Vietnam EAS; CEU Utah Residents (CEPH) with Northern and Western European Ancestry EUR; TSI Toscani in Italia EUR; FIN Finnish in Finland EUR; GBR British in England and Scotland EUR; IBS Iberian Population in Spain EUR; YRI Yoruba in Ibadan, Nigeria AFR; LWK Luhya in Webuye, Kenya AFR; GWD Gambian in Western Divisions in the Gambia AFR; MSL Mende in Sierra Leone AFR; ESN Esan in Nigeria AFR; ASW Americans of African Ancestry in SW USA AFR; ACB African Caribbeans in Barbados AFR; MXL Mexican Ancestry from Los Angeles USA AMR; PUR Puerto Ricans from Puerto Rico AMR; CLM Colombians from Medellin, Colombia AMR; PEL Peruvians from Lima, Peru AMR; GIH Gujarati Indian from Houston, Texas SAS; PJL Punjabi from Lahore, Pakistan SAS; BEB Bengali from Bangladesh SAS; STU Sri Lankan Tamil from the UK SAS; ITU Indian Telugu from the UK
    enum:
      - "CHB"
      - "JPT"
      - "CHS"
      - "CDX"
      - "KHV"
      - "CEU"
      - "TSI"
      - "FIN"
      - "GBR"
      - "IBS"
      - "YRI"
      - "LWK"
      - "GWD"
      - "MSL"
      - "ESN"
      - "ASW"
      - "ACB"
      - "MXL"
      - "PUR"
      - "CLM"
      - "PEL"
      - "GIH"
      - "PJL"
      - "BEB"
      - "STU"
      - "ITU"
      - "other"
      - "Unknown"
      - "not reported"
      - "not allowed to collect"     

  ethnicity:
    term:
      $ref: "_terms.yaml#/ethnicity"
    enum:
      - "hispanic or latino"
      - "inconsistent/contradictory"
      - "not hispanic or latino"
      - "Unknown"
      - "not reported"
      - "not allowed to collect"

  weight:
    term:
      $ref: "_terms.yaml#/weight"
    type: number

  bmi:
    term:
      $ref: "_terms.yaml#/bmi"
    type: number

  height:
    term:
      $ref: "_terms.yaml#/height"
    type: number

# OTHER NON HARMONIZED VARIABLES FROM GTEX AND TOPMED
  age_range:
    description: >
        Range of ages for the subject. The range should not include ages over 89 years.
    type: string

  year_of_birth:
    term:
      $ref: "_terms.yaml#/year_of_birth"
    type:
      - number
      - "null"

  year_of_death:
    term:
      $ref: "_terms.yaml#/year_of_death"
    type: number

  weight_protocol_modification:
    description: >
      Weight, protocol modification
    type: boolean

  height_protocol_modification:
    description: >
      Height, protocol modification
    type: boolean

  girth_protocol_modification:
    description: >
      Girth, protocol modification
    type: boolean

  hip_circumference:
    description: >
      Hip circumference (cm)
    type: number

  bmi_category:
    description: >
      Body mass index, who categories
    enum:
      - "NORMAL"
      - "GRADE 1 OVERWEIGHT"
      - "GRADE 2 OVERWEIGHT"
      - "GRADE 3 OVERWEIGHT"

  bsa:
    description: >
      Body surface area
    type: number

  waist:
    description: >
      Waist circumference (cm)
    type: number

  age_at_height_baseline:
    description: >
      age at measurement of height_baseline (years)
    type: number

  unit_height:
    description: >
      harmonization unit for height. (GTEx)
    type: string

  unit_race:
    description: >
      harmonization unit for race
    type: string

  unit_ethnicity:
    description: >
      harmonization unit for ethnicity
    type: string
  
  hispanic_subgroup:
    description: >
      classification of Hispanic/Latino background for Hispanic/Latino subjects where country or region of origin information is available
    enum:
      - "CentralAmerican"
      - "CostaRican"
      - "Cuban"
      - "Dominican"
      - "Mexican"
      - "PuertoRican"
      - "SouthAmerican"

  unit_hispanic_subgroup:
    description: >
      harmonization unit for hispanic_subgroup
    type: string

  age_at_bmi:
    description: >
      age at measurement of bmi (years)
    type: number

  age_at_weight_baseline:
    description: >
      age at measurement of weight_baseline (years)
    type: number

  subcohort:
    description: >
      A distinct subgroup within a study, generally indicating subjects who share similar characteristics due to study design. Subjects may belong to only one subcohort.
    enum:
      - "Amish_HAPI"
      - "Amish_Longevity"
      - "Amish_Wellness"
      - "ARIC_NoSubcohortStructure"
      - "CARDIA_NoSubcohortStructure"
      - "CFS_NoSubcohortStructure"
      - "CHS_AfricanAmerican"
      - "CHS_Original"
      - "COPDGene_NoSubcohortStructure"
      - "CRA_NoSubcohortStructure"
      - "FHS_Gen3"
      - "FHS_NewOffspringSpouse"
      - "FHS_Offspring"
      - "FHS_Omni1"
      - "FHS_Omni2"
      - "FHS_Original"
      - "GENOA_AfricanAmerican"
      - "GENOA_EuropeanAmerican"
      - "GOLDN_NoSubcohortStructure"
      - "HCHS_SOL_NoSubcohortStructure"
      - "HVH_NoSubcohortStructure"
      - "JHS_NoSubcohortStructure"
      - "Mayo_VTE_GENEVA"
      - "MESA_AirNR"
      - "MESA_Classic"
      - "MESA_Family"
      - "SAS_NoSubcohortStructure"
      - "WHI_ClinicalTrial"
      - "WHI_ObservationalStudy"

  unit_annotated_gender:
    description: >
      harmonization unit for annotated_gender
    type: string

  unit_bmi_baseline:
    description: >
      harmonization unit for bmi_baseline
    type: string

  unit_subcohort:
    description: >
      harmonization unit for subcohort
    type: string

  unit_weight:
    description: >
      harmonization unit for weight. (GTEx)
    type: string

  weight:
    description: >
      The weight of Donor in pounds as reported by Donor, family/next of kin, or medical record abstraction. (GTEx)
    type: number

  cases:
    $ref: "_definitions.yaml#/to_one"
