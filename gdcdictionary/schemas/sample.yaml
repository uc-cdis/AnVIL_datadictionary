$schema: "http://json-schema.org/draft-04/schema#"

id: "sample"
title: sample
type: object
namespace: https://dcp.bionimbus.org/
category: clinical
program: '*'
project: '*'
description: >-
  Biospecimen information that links subjects to samples including sample's provider,
  source, dbgap sample detail and so forth.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: subjects
    backref: samples
    label: describes
    target_type: subject
    multiplicity: many_to_one
    required: true

required:
  - type
  - subjects
  - submitter_id

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

properties:

  $ref: "_definitions.yaml#/ubiquitous_properties"

  dbgap_sample_id:
    description: >-
      Sample identifier used in dbGaP (if previously submitted)
    type: string

  sample_provider:
    description: >-
      The name of collaborator who provides the sample.
    enum:
      - BH
      - Broad
      - UW
      - Yale

  sample_source:
    description: >-
      Uberon Label, anatomical location as described by the Uber Anatomy Ontology
      (UBERON).
    type: string

  tissue_affected_status:
    description: >-
      If applicable to disease, is the tissue from an affected source or an unaffected
      source?
    enum:
      - "No"
      - "Yes"

  autolysis_score:
    description: >-
      Autolysis Score. (GTEx)
    enum:
      - "None"
      - "Mild"
      - "Moderate" 
      - "Severe"
  
  sample_collection_kit:
    description: >-
      Category or classifier of a set of responses, indicates the color of the sample collection kit. (GTEx)
    enum:
      - "Aqua Kit: Organ and Tissue Donation"
      - "Green Kit: Brain Donation"
      - "Yellow Kit: Skin and Blood Donation"

  bss_collection_site:
    description: >-
      Code for BSS collection site. (GTEx)
    enum:
      - 'B1' 
      - 'B1, A1' 
      - 'C1'
      - 'C1, A1'
      - 'D1'
      - 'D1, A1'

  subjects:
    $ref: "_definitions.yaml#/to_one"
